<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>

  <link rel="stylesheet" href="./css/style.css">

</head>
<body>


  <div class="container">
    <ul id="list" class="swing">
      <li style="background-color: var(--red)" class="show">List item</li>
      <li style="background-color: var(--green)" class="show">List item</li>
      <li style="background-color: var(--blue)" class="show">List item</li>
    </ul>
    <button id="add-to-list" type="button">Add a list item</button>
  </div>

<script>

  const btn = document.getElementById('add-to-list');
  const arr = ['--red', '--green', '--blue'];
  var i = 0;

  // 添加函数
  function addItem() {
    const list = document.getElementById('list');
    const newList = document.createElement('li');
    newList.innerHTML = 'A new item';
    list.appendChild(newList);
    // 为item添加颜色
    newList.style.setProperty('background-color', `var(${arr[i]})`);
    i++;
    // console.log(i);
    if (i == 3) {
      i = 0;
    }
    // 为item添加属性
    function addList() {
      newList.className = newList.className + 'show';
    }
    setTimeout(addList, 10);
    clickToRemove(); // 添加item后重新获取list
  }

  // 点击button添加
  btn.addEventListener('click', addItem);

  // 移除函数
  function removeItem() {
    // console.log(this);

    //先移除class
    this.removeAttribute('class');
    const that = this;
    //再删除掉这个元素
    function removeList() {
      var parent = that.parentElement;
      // console.log(parent);
      parent.removeChild(that);
    }
    setTimeout(removeList, 500);
  }

  // 点击item移除
  function clickToRemove() {
    const items = Array.from(document.querySelectorAll('li'));
    items.forEach(item => item.addEventListener('click', removeItem));
  };
  clickToRemove();


</script>


</body>
</html>